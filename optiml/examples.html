<html>
  <head>
    <meta content='text/html;charset=UTF-8' http-equiv='Content-Type'>
    <title>OptiML &mdash; Examples</title>
    <style type='text/css'>
      @import '../css/default.css';
      @import '../css/syntax.css';
      @import '../css/textmate.css';
    </style>
    <style media='print' type='text/css'>
      @import '../css/print.css';
    </style>
    <meta content='Delite documentation' name='subject'>
    <!-- <link href='images/favicon.png' rel='shortcut icon'> -->
  </head>
  <body>
    <div id='outer'>
      <div id='header'>
        <div class='home'><a href='http://stanford-ppl.github.com/Delite/optiml/' title="OptiML">OptiML</a></div>
      </div>
      <div id='menu'>
        <ol>
          <li>Start Here
            <ol>
              <li><a href='index.html'>Welcome</a></li>
              <li><a href='getting_started.html'>Getting Started</a></li>
              <!--<li><a href="faq.html">FAQ</a></li>-->
              <li><a href="examples.html">Examples</a></li>
              <li><a href="debugging.html">Debugging</a></li>
              <li><a href="getting_started_native.html">Native Libraries and CUDA</a></li>
              <li><a href="http://groups.google.com/group/optiml">Mailing List</a></li>
              <li><a href="downloads/optiml-spec-0.1.pdf">Language Specification</a></li>
              <li><a href='http://stanford-ppl.github.com/Delite/index.html'>Delite</a></li>
            </ol>
          </li> 
          <!--
          <li>Reference
            <ol>
              <li><a href='api/0.3/index.html'>ScalaDoc API</a></li>
              <li>&nbsp;</li>
              <li><a href='sponsors.html'>Sponsors</a></li>
              <li class="logo"><a href="http://ppl.stanford.edu"><img width="110" alt="Stanford Pervasive Parallelism Lab" src='images/ppl_logo_small.png'></a></li>
            </ol>
          </li>
          -->
        </ol>
      </div>
      <div id='content'> 
        <h1 id='title_examples'>Examples</h1>
        <p> This page is intended to help users get familiar with OptiML through a series of simple examples. All of
            the source code for the examples is available and runnable from the OptiML github repository.
            Comprehensive documentation of OptiML syntax and features can be found in
            the <a href="downloads/optiml-spec-0.1.pdf">language specification</a>. There are also several
            more thorough example applications located in the <code>apps</code> directory in the repository.</p>
        <ol>
          <li><a href="#basics">Basics</a></li>
          <li><a href="#construction">Constructing new vectors and matrices</a></li>
          <li><a href="#functional">Using functional operators</a></li>
        </ol>
        <div id='basics'>
        <h2> Basics </h2>
        <p> This example shows simple manipulations of vectors and matrices, which are the core data structure in OptiML. </p>
        <p>
        <!-- auto generated by TextMate -->
<pre class="textmate-source"><span class='linenum'>    1</span> <span class="source source_scala"><span class="keyword keyword_declaration keyword_declaration_scala">object</span> <span class="entity entity_name entity_name_class entity_name_class_declaration">Example1Runner</span> <span class="keyword keyword_declaration keyword_declaration_scala">extends</span> <span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_scala">OptiMLApplicationRunner</span> <span class="keyword keyword_declaration keyword_declaration_scala">with</span> <span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_scala">Example1</span>
<span class='linenum'>    2</span> <span class="keyword keyword_declaration keyword_declaration_scala">trait</span> <span class="entity entity_name entity_name_class entity_name_class_declaration">Example1</span> <span class="keyword keyword_declaration keyword_declaration_scala">extends</span> <span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_scala">OptiMLApplication</span> <span class="meta meta_bracket meta_bracket_scala">{</span> 
<span class='linenum'>    3</span>   <span class="keyword keyword_declaration keyword_declaration_scala">def</span> <span class="entity entity_name entity_name_function entity_name_function_declaration">main</span><span class="meta meta_parentheses meta_parentheses_scala"><span class="meta meta_bracket meta_bracket_scala">()</span></span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="meta meta_bracket meta_bracket_scala">{</span>  
<span class='linenum'>    4</span>     <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> 10000x1 DenseVector
</span><span class='linenum'>    5</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">v1</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="entity entity_name entity_name_class">Vector</span>.rand<span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">10000</span><span class="meta meta_bracket meta_bracket_scala">)</span>
<span class='linenum'>    6</span>     <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> 1000x1000 DenseMatrix
</span><span class='linenum'>    7</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">m</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="entity entity_name entity_name_class">Matrix</span>.rand<span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">1000</span>,<span class="constant constant_numeric constant_numeric_scala">1000</span><span class="meta meta_bracket meta_bracket_scala">)</span>
<span class='linenum'>    8</span>     
<span class='linenum'>    9</span>     <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> perform some simple infix operations
</span><span class='linenum'>   10</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">v2</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="meta meta_bracket meta_bracket_scala">(</span>v1<span class="keyword keyword_operator keyword_operator_arithmetic keyword_operator_arithmetic_scala">+</span><span class="constant constant_numeric constant_numeric_scala">10</span><span class="meta meta_bracket meta_bracket_scala">)</span><span class="keyword keyword_operator keyword_operator_arithmetic keyword_operator_arithmetic_scala">*</span><span class="constant constant_numeric constant_numeric_scala">2</span><span class="keyword keyword_operator keyword_operator_arithmetic keyword_operator_arithmetic_scala">-</span><span class="constant constant_numeric constant_numeric_scala">5</span>
<span class='linenum'>   11</span>     
<span class='linenum'>   12</span>     <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> take the pointwise natural log of v2 and sum results
</span><span class='linenum'>   13</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">logv2Sum</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> log<span class="meta meta_bracket meta_bracket_scala">(</span>v2<span class="meta meta_bracket meta_bracket_scala">)</span>.sum
<span class='linenum'>   14</span>     
<span class='linenum'>   15</span>     <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> slice elems 1000-2000 of v2, transpose and multiply by m
</span><span class='linenum'>   16</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">v3</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> v2<span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">1000</span><span class="keyword keyword_operator keyword_operator_scala">::</span><span class="constant constant_numeric constant_numeric_scala">2000</span><span class="meta meta_bracket meta_bracket_scala">)</span>.t<span class="keyword keyword_operator keyword_operator_arithmetic keyword_operator_arithmetic_scala">*</span>m <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> 1x1000 DenseVector result
</span><span class='linenum'>   17</span>      
<span class='linenum'>   18</span>     <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> print the first 10 elements to the screen
</span><span class='linenum'>   19</span>     v3<span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">0</span><span class="keyword keyword_operator keyword_operator_scala">::</span><span class="constant constant_numeric constant_numeric_scala">10</span><span class="meta meta_bracket meta_bracket_scala">)</span>.pprint   
<span class='linenum'>   20</span>   <span class="meta meta_bracket meta_bracket_scala">}</span>
<span class='linenum'>   21</span> <span class="meta meta_bracket meta_bracket_scala">}</span></span></pre>
      <!-- end auto generated by TextMate -->
      </p></div> <!-- basics -->
      <div id='construction'>
        <h2> Constructing new vectors and matrices </h2>
        <p> This example shows various ways of constructing vectors and matrices in OptiML. </p>
        <p>
        <!-- auto generated by TextMate -->
        <pre class="textmate-source"><span class='linenum'>    1</span> <span class="source source_scala"><span class="keyword keyword_declaration keyword_declaration_scala">object</span> <span class="entity entity_name entity_name_class entity_name_class_declaration">Example2Runner</span> <span class="keyword keyword_declaration keyword_declaration_scala">extends</span> <span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_scala">OptiMLApplicationRunner</span> <span class="keyword keyword_declaration keyword_declaration_scala">with</span> <span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_scala">Example2</span>
<span class='linenum'>    2</span> <span class="keyword keyword_declaration keyword_declaration_scala">trait</span> <span class="entity entity_name entity_name_class entity_name_class_declaration">Example2</span> <span class="keyword keyword_declaration keyword_declaration_scala">extends</span> <span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_scala">OptiMLApplication</span> <span class="meta meta_bracket meta_bracket_scala">{</span> 
<span class='linenum'>    3</span>   <span class="keyword keyword_declaration keyword_declaration_scala">def</span> <span class="entity entity_name entity_name_function entity_name_function_declaration">main</span><span class="meta meta_parentheses meta_parentheses_scala"><span class="meta meta_bracket meta_bracket_scala">()</span></span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="meta meta_bracket meta_bracket_scala">{</span>
<span class='linenum'>    4</span>     <span class="comment comment_block comment_block_scala">/* various ways of constructing a DenseVector */</span>
<span class='linenum'>    5</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">v0</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="entity entity_name entity_name_class">Vector</span><span class="meta meta_bracket meta_bracket_scala">[</span><span class="storage storage_type storage_type_primitive storage_type_primitive_scala">Int</span><span class="meta meta_bracket meta_bracket_scala">](</span><span class="constant constant_numeric constant_numeric_scala">100</span><span class="meta meta_bracket meta_bracket_scala">)</span> <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> 100x1 all zeros, ints
</span><span class='linenum'>    6</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">v1</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="entity entity_name entity_name_class">Vector</span><span class="meta meta_bracket meta_bracket_scala">[</span><span class="storage storage_type storage_type_primitive storage_type_primitive_scala">Int</span><span class="meta meta_bracket meta_bracket_scala">](</span><span class="constant constant_numeric constant_numeric_scala">100</span>,<span class="constant constant_language constant_language_scala">false</span><span class="meta meta_bracket meta_bracket_scala">)</span> <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> 1x100 all zeros, ints
</span><span class='linenum'>    7</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">v3</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="entity entity_name entity_name_class">Vector</span>.rand<span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">100</span><span class="meta meta_bracket meta_bracket_scala">)</span> <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> 100x1 random doubles
</span><span class='linenum'>    8</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">v4</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="entity entity_name entity_name_class">Vector</span>.zeros<span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">100</span><span class="meta meta_bracket meta_bracket_scala">)</span> <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> 100x1 all zeros, doubles    
</span><span class='linenum'>    9</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">v5</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="entity entity_name entity_name_class">Vector</span><span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">1</span>,<span class="constant constant_numeric constant_numeric_scala">2</span>,<span class="constant constant_numeric constant_numeric_scala">3</span>,<span class="constant constant_numeric constant_numeric_scala">4</span>,<span class="constant constant_numeric constant_numeric_scala">5</span><span class="meta meta_bracket meta_bracket_scala">)</span> <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> [1,2,3,4,5]
</span><span class='linenum'>   10</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">v6</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="entity entity_name entity_name_class">Vector</span><span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">1</span>.,<span class="constant constant_numeric constant_numeric_scala">2</span>.,<span class="constant constant_numeric constant_numeric_scala">3</span>.,<span class="constant constant_numeric constant_numeric_scala">4</span>.,<span class="constant constant_numeric constant_numeric_scala">5</span>.<span class="meta meta_bracket meta_bracket_scala">)</span> <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> [1.0,2.0,3.0,4.0,5.0]
</span><span class='linenum'>   11</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">v7</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">0</span><span class="keyword keyword_operator keyword_operator_scala">::</span><span class="constant constant_numeric constant_numeric_scala">100</span><span class="meta meta_bracket meta_bracket_scala">)</span> <span class="meta meta_bracket meta_bracket_scala">{</span> e <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=&gt;</span> random<span class="meta meta_bracket meta_bracket_scala">[</span><span class="storage storage_type storage_type_primitive storage_type_primitive_scala">Int</span><span class="meta meta_bracket meta_bracket_scala">]</span> <span class="meta meta_bracket meta_bracket_scala">}</span> <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> 100x1, random ints
</span><span class='linenum'>   12</span>     
<span class='linenum'>   13</span>     <span class="comment comment_block comment_block_scala">/* various ways of constructing a DenseMatrix */</span>
<span class='linenum'>   14</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">m0</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="entity entity_name entity_name_class">Matrix</span><span class="meta meta_bracket meta_bracket_scala">[</span><span class="storage storage_type storage_type_primitive storage_type_primitive_scala">Int</span><span class="meta meta_bracket meta_bracket_scala">](</span><span class="constant constant_numeric constant_numeric_scala">100</span>,<span class="constant constant_numeric constant_numeric_scala">50</span><span class="meta meta_bracket meta_bracket_scala">)</span> <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> 100x50 zeros, ints
</span><span class='linenum'>   15</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">m1</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="entity entity_name entity_name_class">Matrix</span>.rand<span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">100</span>,<span class="constant constant_numeric constant_numeric_scala">50</span><span class="meta meta_bracket meta_bracket_scala">)</span> <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> 100x50 random doubles
</span><span class='linenum'>   16</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">m2</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="entity entity_name entity_name_class">Matrix</span>.zeros<span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">100</span>,<span class="constant constant_numeric constant_numeric_scala">50</span><span class="meta meta_bracket meta_bracket_scala">)</span> <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> 100x50 zeros, doubles
</span><span class='linenum'>   17</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">m3</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="entity entity_name entity_name_class">Matrix</span><span class="meta meta_bracket meta_bracket_scala">(</span><span class="entity entity_name entity_name_class">Vector</span><span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">1</span>,<span class="constant constant_numeric constant_numeric_scala">2</span>,<span class="constant constant_numeric constant_numeric_scala">3</span><span class="meta meta_bracket meta_bracket_scala">)</span>,<span class="entity entity_name entity_name_class">Vector</span><span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">4</span>,<span class="constant constant_numeric constant_numeric_scala">5</span>,<span class="constant constant_numeric constant_numeric_scala">6</span><span class="meta meta_bracket meta_bracket_scala">))</span> <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> [1,2,3]
</span><span class='linenum'>   18</span>                                                  <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> [4,5,6]
</span><span class='linenum'>   19</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">m4</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">0</span><span class="keyword keyword_operator keyword_operator_scala">::</span><span class="constant constant_numeric constant_numeric_scala">1</span>, <span class="keyword keyword_operator keyword_operator_arithmetic keyword_operator_arithmetic_scala">*</span><span class="meta meta_bracket meta_bracket_scala">)</span> <span class="meta meta_bracket meta_bracket_scala">{</span> i <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=&gt;</span> <span class="entity entity_name entity_name_class">Vector</span><span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">2</span>,<span class="constant constant_numeric constant_numeric_scala">3</span>,<span class="constant constant_numeric constant_numeric_scala">4</span><span class="meta meta_bracket meta_bracket_scala">)</span> <span class="meta meta_bracket meta_bracket_scala">}</span>  <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> [2,3,4]
</span><span class='linenum'>   20</span>                                                <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> [2,3,4]
</span><span class='linenum'>   21</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">m5</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">0</span><span class="keyword keyword_operator keyword_operator_scala">::</span><span class="constant constant_numeric constant_numeric_scala">1</span>, <span class="constant constant_numeric constant_numeric_scala">0</span><span class="keyword keyword_operator keyword_operator_scala">::</span><span class="constant constant_numeric constant_numeric_scala">1</span><span class="meta meta_bracket meta_bracket_scala">)</span> <span class="meta meta_bracket meta_bracket_scala">{</span> <span class="meta meta_bracket meta_bracket_scala">(</span>i,j<span class="meta meta_bracket meta_bracket_scala">)</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=&gt;</span> i<span class="keyword keyword_operator keyword_operator_arithmetic keyword_operator_arithmetic_scala">*</span>j <span class="meta meta_bracket meta_bracket_scala">}</span>  <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> [0,0]
</span><span class='linenum'>   22</span>                                             <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> [0,1]                               
</span><span class='linenum'>   23</span>                    
<span class='linenum'>   24</span>     <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> print first row                          
</span><span class='linenum'>   25</span>     m5<span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">0</span><span class="meta meta_bracket meta_bracket_scala">)</span>.pprint
<span class='linenum'>   26</span>   <span class="meta meta_bracket meta_bracket_scala">}</span>
<span class='linenum'>   27</span> <span class="meta meta_bracket meta_bracket_scala">}</span></span></pre>
        <!-- end auto generated by TextMate -->
      </p></div> <!-- vec/mat construction -->
      <div id='functional'>
        <h2>Using functional operators</h2>
        <p> Functional operators are a key piece of making OptiML more concise and expressive. This example demonstrates
            some of the more common operations and how they are typically chained together. These operators are usually
            parallel, so will speed up when run with more threads, and fused together, so they use less memory than
            typical bulk collection operators.</p> 
        <p>
        <!-- auto generated by TextMate -->
        <pre class="textmate-source"><span class='linenum'>    1</span> <span class="source source_scala"><span class="keyword keyword_declaration keyword_declaration_scala">object</span> <span class="entity entity_name entity_name_class entity_name_class_declaration">Example3Runner</span> <span class="keyword keyword_declaration keyword_declaration_scala">extends</span> <span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_scala">OptiMLApplicationRunner</span> <span class="keyword keyword_declaration keyword_declaration_scala">with</span> <span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_scala">Example3</span>
<span class='linenum'>    2</span> <span class="keyword keyword_declaration keyword_declaration_scala">trait</span> <span class="entity entity_name entity_name_class entity_name_class_declaration">Example3</span> <span class="keyword keyword_declaration keyword_declaration_scala">extends</span> <span class="entity entity_other entity_other_inherited-class entity_other_inherited-class_scala">OptiMLApplication</span> <span class="meta meta_bracket meta_bracket_scala">{</span> 
<span class='linenum'>    3</span>   <span class="keyword keyword_declaration keyword_declaration_scala">def</span> <span class="entity entity_name entity_name_function entity_name_function_declaration">main</span><span class="meta meta_parentheses meta_parentheses_scala"><span class="meta meta_bracket meta_bracket_scala">()</span></span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="meta meta_bracket meta_bracket_scala">{</span>
<span class='linenum'>    4</span>     <span class="comment comment_block comment_block_scala">/* chaining functional operators */</span>
<span class='linenum'>    5</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">v</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="entity entity_name entity_name_class">Vector</span>.rand<span class="meta meta_bracket meta_bracket_scala">(</span><span class="constant constant_numeric constant_numeric_scala">1000</span><span class="meta meta_bracket meta_bracket_scala">)</span>
<span class='linenum'>    6</span> 
<span class='linenum'>    7</span>     <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> filter selects all the elements matching a predicate
</span><span class='linenum'>    8</span>     <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> map constructs a new vector by applying a function to each element    
</span><span class='linenum'>    9</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">v2</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> <span class="meta meta_bracket meta_bracket_scala">(</span>v<span class="keyword keyword_operator keyword_operator_arithmetic keyword_operator_arithmetic_scala">*</span><span class="constant constant_numeric constant_numeric_scala">1000</span><span class="meta meta_bracket meta_bracket_scala">)</span>.filter<span class="meta meta_bracket meta_bracket_scala">(</span>e <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=&gt;</span> e <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">&lt;</span> <span class="constant constant_numeric constant_numeric_scala">500</span><span class="meta meta_bracket meta_bracket_scala">)</span>.map<span class="meta meta_bracket meta_bracket_scala">(</span>e<span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=&gt;</span>e<span class="keyword keyword_operator keyword_operator_arithmetic keyword_operator_arithmetic_scala">*</span>e<span class="keyword keyword_operator keyword_operator_arithmetic keyword_operator_arithmetic_scala">*</span>random<span class="meta meta_bracket meta_bracket_scala">[</span><span class="storage storage_type storage_type_primitive storage_type_primitive_scala">Double</span><span class="meta meta_bracket meta_bracket_scala">])</span>
<span class='linenum'>   10</span>     println<span class="meta meta_bracket meta_bracket_scala">(</span>v2.length<span class="meta meta_bracket meta_bracket_scala">)</span>
<span class='linenum'>   11</span>     
<span class='linenum'>   12</span>     <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> reduce produces a scalar by applying successively applying a function to pairs of elems
</span><span class='linenum'>   13</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="entity entity_name entity_name_val entity_name_val_declaration">logmin</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> v2.reduce<span class="meta meta_bracket meta_bracket_scala">((</span>a,b<span class="meta meta_bracket meta_bracket_scala">)</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=&gt;</span> <span class="keyword keyword_control keyword_control_flow keyword_control_flow_scala">if</span> <span class="meta meta_bracket meta_bracket_scala">(</span>log<span class="meta meta_bracket meta_bracket_scala">(</span>a<span class="meta meta_bracket meta_bracket_scala">)</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">&lt;</span> log<span class="meta meta_bracket meta_bracket_scala">(</span>b<span class="meta meta_bracket meta_bracket_scala">))</span> a <span class="keyword keyword_control keyword_control_flow keyword_control_flow_scala">else</span> b<span class="meta meta_bracket meta_bracket_scala">)</span>
<span class='linenum'>   14</span>     println<span class="meta meta_bracket meta_bracket_scala">(</span>logmin<span class="meta meta_bracket meta_bracket_scala">)</span>        
<span class='linenum'>   15</span>     
<span class='linenum'>   16</span>     <span class="comment comment_line comment_line_double-slash comment_line_double-slash_scala"><span class="punctuation punctuation_definition punctuation_definition_comment punctuation_definition_comment_scala">//</span> partition splits the vector into two based on a predicate
</span><span class='linenum'>   17</span>     <span class="keyword keyword_declaration keyword_declaration_stable keyword_declaration_stable_scala">val</span> <span class="meta meta_bracket meta_bracket_scala">(</span>v2small, v2large<span class="meta meta_bracket meta_bracket_scala">)</span> <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=</span> v2.partition<span class="meta meta_bracket meta_bracket_scala">(</span>e <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">=&gt;</span> e <span class="keyword keyword_operator keyword_operator_comprasion keyword_operator_comprasion_scala">&lt;</span> <span class="constant constant_numeric constant_numeric_scala">1000</span><span class="meta meta_bracket meta_bracket_scala">)</span>
<span class='linenum'>   18</span>     println<span class="meta meta_bracket meta_bracket_scala">(</span><span class="string string_quoted string_quoted_double string_quoted_double_scala">"v2small size: "</span> <span class="keyword keyword_operator keyword_operator_arithmetic keyword_operator_arithmetic_scala">+</span> v2small.length<span class="meta meta_bracket meta_bracket_scala">)</span>
<span class='linenum'>   19</span>     println<span class="meta meta_bracket meta_bracket_scala">(</span><span class="string string_quoted string_quoted_double string_quoted_double_scala">"v2large size: "</span> <span class="keyword keyword_operator keyword_operator_arithmetic keyword_operator_arithmetic_scala">+</span> v2large.length<span class="meta meta_bracket meta_bracket_scala">)</span>    
<span class='linenum'>   20</span>   <span class="meta meta_bracket meta_bracket_scala">}</span>
<span class='linenum'>   21</span> <span class="meta meta_bracket meta_bracket_scala">}</span></span></pre>
        <!-- end auto generated by TextMate -->
      </p></div> <!-- functional operators -->

      </div>
      <div id='footer'>Copyright &copy; 2011</div>
    </div>
  </body>
</html>
